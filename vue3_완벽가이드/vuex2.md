# Vuex 2 : store에 있는 state 데이터 바꾸는 법

## Vuex에 있는 state 데이터를 변경하려면

직접 vue파일에서 state를 수정하면 안된다고 했습니다. 

해도 되긴 하는데 그럴거면 Vuex 쓸 이유가 없습니다.

 

name : 'kim' 이라는 state데이터가 하나 있고 

100개의 Vue 파일에서 name : 'kim'을 수정한다고 칩시다.

근데 개발하다가 갑자기 'kim'이 아니라 123 이라는 숫자가 되어버리는 버그가 발생한겁니다.

그럼 대체 어떤 컴포넌트를 뒤져야합니까.

100개를 다 뒤져야합니다. 

이 불상사를 방지하기 위해서 state 수정은 store.js만 할 수 있게 코드를 짜놓는게 좋습니다.

그러면 앞으로 state가 이상해지는 버그가 발생할 때 store.js만 뒤지면 버그를 잡을 수 있으니까요. 

 

이런걸 멋진 개발용어로 'state 관리가 용이하다'라고 부릅니다. 그래서 Vuex를 상태(state)관리 라이브러리라고도 부릅니다.

그래서 state 변경하려면 코드 어떻게 짜야되냐면

<br/>

## mutations 라는 항목을 만들어서 거기에 데이터 수정방법을 정의합니다.

아시겠습니까 mutations라는 object 항목을 만든 다음에

거기다가 state 수정방법을 정의합니다. (함수로 만들어줍니다.)

그 다음에 이 함수를 부르는 방식으로 사용합니다.

예를 들어 .vue파일에서 어떤 버튼을 누르면 age라는 state를 1 더해주는 기능을 만들고 싶습니까.

그럼 age라는 state의 수정방법을 미리 만들어야합니다.

```js
const store = createStore({
  state () {
    return {
      name : 'kim',
      age : 20,
    }
  },
  mutations :{
    한살더하기(state){
      state.age++
    }
  },
}
```
한살더하기()를 만들었습니다.

저렇게 파라미터 하나 추가하면 위에 있는 state를 뜻합니다. 그래서 그거 가지고 마음대로 지지고 볶으면 됩니다.

<br/>

그 다음에 vue 파일에서는 뭔가 버튼을 누르면 age를 +1 해주고 싶습니까.

그러면 store.js에게 부탁만 하면 됩니다.

한살더하기()를 실행해달라고요. 

근데 store.js에게 부탁할 땐 정중히 부탁해야합니다.

```html
(App.vue)

<button @click="$store.commit('한살더하기')">버튼</button>
```
vue파일은 $store.commit(함수명) 이런 형식에 맞춰야 부탁을 할 수 있습니다.

안그러면 부탁안들어줌 

아무튼 그러면 저거 버튼 누르면 store.js에게 한살더하기 실행해달라고 부탁합니다.

그럼 store.js는 한살더하기() 실행해줍니다. 그럼 age에 1이 더해집니다.

이게 Vuex에 있는 state 수정방법입니다.

<br/>

Vuex 쓰면 state 수정하는 것도 매우 귀찮아집니다.

하지만 나중에 버그 찾는다고 Vue파일 100만개 뒤지는 것 보다는 낫지 않겠습니까.