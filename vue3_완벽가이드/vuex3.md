# Vuex 3 : actions 항목을 알아보자

Vuex에선 state를 수정할 때 mutations 함수를 만들어서 그걸 이용해서 수정하라고 배워봤는데

가끔 서버에서 데이터를 가져와서 수정하고 싶을 때가 있습니다.

그럴때 당연히 서버로 ajax 요청을 날리면 되는데

그런건 mutations에 직접 적지 않고 actions라는 항목에 적으셔야합니다. 

 

왜냐면 mutations 함수들을 만들 때 내부에 ajax처럼 오래걸리는 코드를 적어놓는다면

나중에 길게 코드짤 때 힘들어져서 그렇습니다. 

 

예를 들어서 차례로 name과 age 데이터를 수정하고 싶다고 가정해봅시다. 

무조건 name을 수정하고 그 다음에 age를 수정하고 싶은 겁니다.

그러려면 그냥

```
name수정하는함수()
age수정하는함수() 
```
이렇게 사용하면 끝입니다. 

<br/>

근데 님들이 name수정하는함수() 안에 3초 넘게 걸리는 ajax 요청을 담아놨다면 

```
name수정하는함수()
age수정하는함수() 
```

이렇게 사용하면 age 수정이 먼저 될 수도 있습니다.

왜냐면 자바스크립트는 ajax처럼 오래걸리는 코드는 (정확히 말하면 비동기식 처리를 지원하는 코드는)

잠깐 제껴두고 다음줄 부터 실행하려는 경향이 있기 때문입니다. 

그럼 나중에 의도치않은 버그가 생길 수 있고 코드가 길어질 수 있습니다. 

 

 

그래서 state를 수정하는 mutations 함수는 ajax 그런거 넣지말고

순수하게 state 변경만 하는 함수로 만들어두시길 바랍니다. 

ajax 그런건 actions에 맡겨줍시다.

<br/>

## actions 만드는 법 

그낭 mutations처럼 actions 항목을 만드신 후에 함수형태로 만드시면 됩니다.

```js
actions : {
  데이터가져오기(){
    axios.get('').then(()=>{ 
      성공시 실행할 코드 
    })
  }
}
```
그럼 이제 App.vue 이런 곳에서 $store.dispatch('데이터가져오기') 라고 사용했을 때 진짜 데이터가져와줍니다. 

그리고 당연히 actions 함수를 부탁할 땐 $store.dispatch라고 정중히 부탁하셔야합니다. 

데이터가져온 직후에 그걸로 state도 변경하고 싶으면 

```js
actions : {
  데이터가져오기(context){
    axios.get('').then(()=>{ 
      context.commit('mutations함수명') 
    })
  }
}
```
이렇게 사용합니다.

왜냐고요? state 변경할 땐 무조건 mutations 함수 만들어쓰셔야하니까요.

그리고 mutations함수를 사용할 땐 예외없이 commit() 이라고 쓰셔야하는데 

그걸 쓰기 위해선 함수에 context라는 파라미터 (자유작명가능) 하나 추가해주면 쓸 수 있습니다.

그 파라미터는 $store 변수같은 거라고 생각해도 좋습니다. 

<br/>

뭔가 복잡하지만 익숙해지면 이게 코드 관리하기 좋구나라는 생각을 하게 될겁니다.

아닐 수도 있지만 결국 프로젝트 커지면 Vuex는 필수기 때문에

이에 능숙해지고 싶으면 Vuex를 이용해서 인스타그램이나 부동산사이트를 다시 만들어보는건 어떨까요.

아니면 개인 프로젝트 하나 해보라고 했었던 기억이 나는데 거기 적용해보든가요. 

강의 듣는게 중요한게 아닙니다.

꼭 제발 처음부터 직접 프로젝트 만들어보는 연습을 해보도록 합시다. 